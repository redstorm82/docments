<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang='zh-CN' xml:lang='zh-CN' xmlns='http://www.w3.org/1999/xhtml'>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico?t=1423294220000" />
  <title>查看 Node.js 中的内存泄露 - 技术翻译 - 开源中国社区</title>
        <link rel="stylesheet" href="/css/channel.css?t=1427810261000" type="text/css" media="screen" />
  <link rel="stylesheet" type="text/css" href="/js/2011/fancybox/jquery.fancybox-1.3.4.css?t=1399607777000" media="screen" />
  <link rel="alternate" type="application/rss+xml" title="最新开源项目" href="http://www.oschina.net/project/rss" />
  <link rel="alternate" type="application/rss+xml" title="最新开源资讯" href="http://www.oschina.net/news/rss" />
  <link rel="alternate" type="application/rss+xml" title="最新问题列表" href="http://www.oschina.net/question/rss" />
  <link rel="alternate" type="application/rss+xml" title="最新翻译列表" href="http://www.oschina.net/translate/rss" />
  <link rel="alternate" type="application/rss+xml" title="最新博客列表" href="http://www.oschina.net/blog/rss" />
  <link rel="alternate" type="application/rss+xml" title="最新代码分享列表" href="http://www.oschina.net/code/rss" />
  <link rel="alternate" type="application/rss+xml" title="开源中国 - 源码列表" href="http://www.oschina.net/code/source_rss" />
    <!--添加emoji支持-->
    <link rel="stylesheet" type="text/css" href="/js/team/grunt/dist/emoji/nature.css?t=1430349168000">
    <link rel="stylesheet" type="text/css" href="/js/team/grunt/dist/emoji/object.css?t=1430349168000">
    <link rel="stylesheet" type="text/css" href="/js/team/grunt/dist/emoji/people.css?t=1429214431000">
    <link rel="stylesheet" type="text/css" href="/js/team/grunt/dist/emoji/place.css?t=1429214431000">
    <link rel="stylesheet" type="text/css" href="/js/team/grunt/dist/emoji/Sysmbols.css?t=1429214431000">
    <link rel="stylesheet" type="text/css" href="/js/team/grunt/dist/emoji/twemoji.css?t=1429214431000">

  <script type="text/javascript" src="/js/2012/jquery-1.7.1.min.js?t=1399607778000"></script>
  <script type="text/javascript" src="/js/2012/jquery.form.js?t=1399607778000"></script>
  <script type="text/javascript" src="/js/2011/fancybox/jquery.fancybox-fixed.js?t=1399607777000?2014031702"></script>
    <link rel="stylesheet" href="/js/poshytip/tip-yellowsimple/tip-yellowsimple.css?t=1399607776000" type="text/css" />
  <script type="text/javascript" src="/js/poshytip/jquery.poshytip.min.js?t=1399607776000"></script>
  <script type="text/javascript">
  	g_user = {
	id:0,
	name:'',
	login:false};  </script>
    <script type="text/javascript" src="/js/2011/oschina.js?t=1399607777000"></script>
  <script type="text/javascript" src="/js/utils.js?t=1399607775000"></script>
  <script type="text/javascript" src="/js/channel.js?t=1428620246000?2014022501"></script>
    </head>
<body>
<div id='OSC_NavTop'>
	<div class="wp998">
        <div id="OSC_Channels">
        	<ul>
        	<li class="item"><a href="http://www.oschina.net/" class='home'>首页</a></li>        	<li class="item control_select"><a href="http://www.oschina.net/project" class='project'>开源项目</a>
				<ul class="cs_content">
                	                	<li><a href="http://www.oschina.net/project/lang/19/java">Java 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/194/csharp">C# 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/22/php">PHP 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/21/c">C/C++ 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/26/ruby">Ruby 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/25/python">Python 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/358/go">Go开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/28/javascript">JS开源软件</a></li>
				</ul>
			</li>
        	<li class="item control_select">
				<a href="http://www.oschina.net/question" class='question'>问答</a>
				<ul class="cs_content">
                	<li><a href="http://www.oschina.net/question?catalog=1"> 技术问答 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=2"> 技术分享 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=3"> IT大杂烩 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=100"> 职业生涯 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=4"> 站务/建议 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/alipay"> 支付宝专区 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/mopaas"> MoPaaS专区 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/hardware"> 开源硬件专区 &raquo; </a></li>
				</ul>
			</li>
        	<li class="item"><a href="http://www.oschina.net/code/list" class='code'>代码</a></li>
        	        	<li class="item"><a href="http://www.oschina.net/blog" class='blog'>博客</a></li>
        	<li class="item"><a href="http://www.oschina.net/translate" class='tran hl'>翻译</a></li>
            <li class="item"><a href="http://www.oschina.net/news" class='news'>资讯</a></li>
        	<li class="item control_select">
				<a href="http://www.oschina.net/android" class='mobile'>移动开发</a>
				<ul class="cs_content cs_mobile">
                	<li class="android_"><a href="http://www.oschina.net/android">Android开发专区</a></li>
                	<li class="ios_"><a href="http://www.oschina.net/ios/home">iOS开发专区</a></li>
                	<li class="ios_"><a href="http://www.oschina.net/ios/codingList">iOS代码库</a></li>
                	<li class="wp7_"><a href="http://www.oschina.net/wp">Windows Phone</a></li>
				</ul>
			</li>
        	        	<li class="item t_job"><a href="http://job.oschina.net/" class='job'>招聘</a></li>
									            <li class="item control_select">
                <a href="http://city.oschina.net/" id="MyCities" title="城市圈">城市圈</a>
							</li>
        	</ul>
        </div>
		<div id="OSC_Userbar">
                		    		当前访客身份：游客 [ <a href="http://www.oschina.net/home/login?goto_page=http%3A%2F%2Fwww.oschina.net%2Ftranslate%2Ftracking-down-memory-leaks-in-node-js-a-node-js-holiday-season">登录</a> | <a href="http://www.oschina.net/home/reg">加入开源中国</a> ]
    				</div>
		<div class='clear'></div>
	</div>

</div>
<div id='OSC_Banner'><div class="wp998"><a href='http://www.oschina.net/' class='Logo' title='OSChina 开源中国'>开源中国</a>
<h1><a href="/translate">技术翻译</a></h1>
<dl>
    <dt>已有文章 <em>2094</em> 篇</dt>
	<dt>
		当前位置：
            <a href='/translate/list?type=2'>译文列表</a>&nbsp;&raquo;&nbsp;<a href='/translate/list/5?type=2'>    服务器端开发</a> , <a href="" class="deliver">投递原文</a>
    		</dt>	
</dl>
<form action='http://www.oschina.net/search' class='search'>
	<input type='hidden' name='scope' value='translate'/>
	<input id='channel_q' type='text' name='q' value='' placeholder='在 2094 篇翻译的文章中搜索' class='TXT'/>
    <button type='submit' class='BTN'>搜 索</button>
</form>
<script type="text/javascript">
    $(document).ready(function(){
        scrolltotop.offset(100,120);
        scrolltotop.init();
        $('.deliver').click(function(){
            popup("/translate/deliver");
            return false;
        });
    });
</script>
<div class='clear'></div></div></div>
<div id="OSC_Screen">
	<div id="OSC_Content" class='CenterDiv'>
<style type="text/css">
.highlight {
	color: #A00;
	padding: 0 1px;
	margin: 0 2px;
}

.NoData {
	text-align: center;
	padding: 20px 0;
	color: #999;
}

.error_msg {
	height: 16px;
	color: #A00;
	margin: 10px 0 10px 0;
	background: url('/img/warning.gif') no-repeat left center;
	padding-left: 24px;
}

.error_msg a {
	padding: 0 5px 0 5px;
	font-weight: bold;
}

.ajax_processing {
	display: none;
	background: url('/img/loading.gif') no-repeat left center;
	padding-left: 20px;
}

label.SELECTED {
	color: #C00;
}

input.TEXT,textarea.TEXT,input.SEARCH {
	border: 1px solid #bbb;
	font-size: 13px;
	padding: 3px;
}

input.BUTTON {
	height: 25px;
	line-height: 25px;
	padding: 0 3px;
}

.mb10 {
	margin-bottom: 10px;
}

a.rndbutton {
	background: #d1c0a5;
	color: #fff;
	text-decoration: none;
	height: 30px;
	float: left;
	margin: 0;
	border: 0px solid #000;
	font-weight: bold;
	font-size: 12pt;
	cursor: pointer;
}

a.rndbutton:hover {
	background-color: #bfaa88;
}

a.rndbutton span {
	color: #fff;
	float: left;
	margin: 0 0 0 10px;
	padding: 0 10px 0 0;
	height: 30px;
	line-height: 30px;
}

input.rndbutton {
	background: #4E867B;
	color: #fff;
	border: 0px solid #000;
	cursor: pointer;
}

input.rndbutton:hover {
	background-color: #4F978A;
}

.SmallPortrait {
	filter: alpha(opacity = 90); /* IE */
	-moz-opacity: 0.9; /* Moz + FF */
	opacity: 0.9;
	padding: 1px;
	background: #fff;
	border: 1px solid #ccc;
}

a:hover .SmallPortrait {
	filter: alpha(opacity = 100); /* IE */
	-moz-opacity: 1.0; /* Moz + FF */
	opacity: 1.0;
	border: 1px solid #40AA53;
}

.TextContent p {
	margin-bottom: 5pt;
}

.TextContent h1,.TextContent h2,.TextContent h3 {
	margin-bottom: 10pt;
	border-bottom: 1px solid #CCC;
	padding-bottom: 5px;
}

.translate {
	float: left;
	width: 678px;
}

.translate_right {
	float: right;
	width: 300px;
	overflow: hidden;
}

.translate_right .PopularTags {
	margin: 0 0 10px 0;
	background: white;
	border: 1px solid #eee;
	box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.1);
	-moz-box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.1);
	-webkit-box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.1);
}

.translate_right .PopularTags p {
	padding: 10px;
}

#top_nav {
	width: 100%;
	font-size: 14px;
	line-height: 24px;
	padding: 2px;
	border-bottom: 1px solid #40AA53;
}

#top_nav a {
	color: #005075;
	outline: 0;
	text-decoration: none;
}

#top_nav .right {
	float: right;
	color: #666;
}

ul.tabnav {
	text-align: left;
	margin: 1em 0 0 0;
	font-weight: bold;
	font-size: 10pt;
	border-bottom: medium double #E3E3E3;
	list-style-type: none;
	padding: 3px 10px 15px 10px;
}

ul.tabnav li {
	display: inline;
	margin-left: 10px;
}

ul.tabnav li.current {
	border-bottom: 1px solid #fff;
	background-color: #fff;
}

ul.tabnav li.current a {
	background-color: #0D5178;
	color: #FFF;
	cursor: text;
}

ul.tabnav li a {
	padding: 4px 8px 5px 8px;
	color: #666;
	margin-right: 0px;
	text-decoration: none;
	border-bottom: none;
}

ul.tabnav a:hover {
	background: #FFF;
	text-decoration: none;
}

.header span {
	margin-left: 10px;
	font-size: 9pt;
	color: #666;
}

.header a.parent {
	color: #40AA53;
}

.header em.child {
	color: #46B;
	font-style: normal;
}

.header .more .active {
	color: #A00;
}

.remark {
	margin-top: 8px;
	font-size: 9pt;
	color: #999999;
}

.sta_btn {
	border: 1px solid #ccc;
	padding: 2px 5px;
	float: right;
	margin-right: 10px;
	-webkit-box-shadow: 0 1px 3px rgba(198, 198, 198, 0.5);
	box-shadow: 0 1px 3px rgba(198, 198, 198, 0.5);
}

.remark a {
	text-decoration: none;
}

.remark em {
	margin-right: 8px;
	font-style: normal;
}

.remark span {
	margin-left: 8px;
	margin-right: 8px;
}

.latest {
	margin: 10px 10px 0px 10px;
	padding-bottom: 10px;
	border-bottom: 1px solid #e3e3e3;
	_height: 1%;
}

.latest dt a {
	font-size: 18px;
}

.latest .content {
	font-size: 14px;
	line-height: 24px;
	height: auto;
	overflow: hidden;
	color: #333;
}

.recommendList {
	margin-bottom: 10px;
}

.recommendList a {
	text-decoration: none;
}

.recommendList a:hover {
	text-decoration: underline;
}

.recommendList a.pic img {
	float: right;
	width: 140px;
	height: 100px;
	border: 0;
	margin: 18px 5px;
}

.recommendList ul {
	margin: 8px 0;
}

.recommendList li {
	float: left;
	width: 300px;
	margin: 0 10px;
	font-size: 12px;
	line-height: 30px;
	color: #3E62A6;
	overflow: hidden;
	white-space: nowrap;
	-o-text-overflow: ellipsis;
	text-overflow: ellipsis;
}

.recommendList li a {
	font-size: 13px;
}

.latest span,.recommendList li span {
	color: #999;
	font-size: 12px;
}

.articleList {
	background: #FFF;
	padding-bottom: 10px;
}

.articleList .article {
	margin: 10px;
	padding-bottom: 10px;
	border-bottom: medium double #e3e3e3;
}

.articleList .article a img {
	float: right;
	width: 80px;
	height: 60px;
	border: 0;
	margin: 18px 5px;
}

.articleList .article dt a {
	text-decoration: none;
	font-size: 16px;
}

.articleList .article dt a:hover {
	text-decoration: underline;
}

.articleList .article dt a em {
	font-style: normal;
	color: #A00;
}

.articleList .article .status_0 {
	padding-left: 20px;
	height: 20px;
	line-height: 20px;
	margin-top: 8px;
	font-style: normal;
	color: #F90;
	background: url(/img/translate.gif) 0 -30px no-repeat;
}

.articleList .article .status_2 {
	padding-left: 20px;
	height: 20px;
	line-height: 20px;
	margin-top: 8px;
	font-style: normal;
	color: #00BB4B;
	background: url(/img/translate.gif) 0 0 no-repeat;
}

.articleList .article .status_0 em,.articleList .article .status_2 em {
	font-style: normal;
	color: #888;
	margin-left: 10px;
}

.articleList .article .sub_title {
	font-size: 12px;
	color: #333;
	margin-top: 5px;
}

.articleList .article .content {
	font-size: 13px;
	line-height: 24px;
	height: auto;
	overflow: hidden;
	color: #333;
}

.articleList .pager {
	margin: 0 10px;
}

.articleList .TagDetail {
	margin: 10px 2px;
	color: #666;
	border: 2px solid #ccc;
	padding: 5px;
	background: #ffd;
	font-size: 9pt;
}

.articleList .TagDetail img.project {
	float: left;
	width: 48px;
	height: 48px;
	margin: 0 20px 10px 0;
}

#categoryMenu {
	margin-bottom: 10px;
	background: white;
}

#categoryMenu ul {
	margin: 10px 0;
}

#categoryMenu li a {
	display: block;
	text-decoration: none;
	height: 36px;
	line-height: 36px;
	font-size: 14px;
	color: #3B3B3B;
	padding: 0 15px;
}

#categoryMenu li a:hover {
	background: #EEE;
	color: #080;
}

#categoryMenu li a em {
	float: right;
	padding: 0 5px;
	margin-top: 8px;
	height: 20px;
	line-height: 20px;
	background: #EEE;
	font-size: 12px;
	font-style: normal;
	border-radius: 3px;
	-moz-border-radius: 3px;
	-webkit-border-radius: 3px;
}

#categoryMenu li a:hover em {
	background: #00BC00;
	color: white;
}

#categoryMenu li.current,#categoryMenu li.current a:hover {
	background: #3dae4f;
	background: -moz-linear-gradient(#3dae4f, #0c701c);
	background: -webkit-linear-gradient(#3dae4f, #0c701c);
}

#categoryMenu li.current a {
	color: white;
}

#categoryMenu li.current a em {
	color: white;
	background: none;
}

.hotList,.TopUsers {
	margin-bottom: 10px;
	background: #FFF;
}

.hotList a {
	text-decoration: none;
}

.hotList a:hover {
	text-decoration: underline;
}

.hotList ul {
	margin: 10px 0;
}

.hotList ul li {
	height: 24px;
	width: 278px;
	padding: 0 10px;
	overflow: hidden;
	white-space: nowrap;
	-o-text-overflow: ellipsis;
	text-overflow: ellipsis;
}

.hotList ul li a {
	height: 24px;
	line-height: 24px;
	font-size: 10pt;
}

.hotList .dot {
	height: 10px;
	width: 10px;
	font-size: 0;
	margin-right: 5px;
	overflow: hidden;
	zoom: 1;
	display: inline-block;
	*display: inline;
	*zoom: 1;
}

.hotList .dot1 {
	background-color: #f00;
}

.hotList .dot2 {
	background-color: #f90;
}

.hotList .dot3 {
	background-color: #aed900;
}

.hotList .dot4 {
	background-color: #2bd600;
}

.hotList .dot5 {
	background-color: #00bb4b;
}

.hotList .dot6 {
	background-color: #01bebe;
}

.hotList .dot7 {
	background-color: #035bdf;
}

.hotList .dot8 {
	background-color: #2200a8;
}

.hotList .dot9 {
	background-color: #510066;
}

.hotList .dot10 {
	background-color: #3f0030;
}

.TopUsers ul {
	padding-left: 12px;
}

.TopUsers ul li {
	text-align: center;
	margin: 0 7px 10px 0;
	float: left;
	overflow: hidden;
	font-size: 7pt;
}

.TopUsers ul {
	margin-top: 10px;
}

.TopUsers ul li a {
	text-decoration: none;
}

.TopUsers ul li img {
	width: 64px;
	height: 64px;
	background: #fff;
}

.TopUsers ul li a:hover img {
	
}

a.cmdbutton {
	background: #5CC26F;
	color: #fff;
	text-decoration: none;
	float: left;
	margin: 0 10px;
	border: 0px solid #000;
	font-size: 16pt;
	cursor: pointer;
}

a.cmdbutton:hover {
	background-position: left -30px;
}

a.cmdbutton span {
	color: #fff;
	float: left;
	margin: 6px;
	padding: 0 10px;
	height: 30px;
	line-height: 30px;
}

a.cmdbutton.paying-translation {
	width: 240px;
	margin-top: 20px;
	padding: 6px;
	text-align: center;
}

.Article {
	margin-top: 10px;
}

.Article .Top {
	padding: 10px;
	background: #EDEDED;
	color: #666;
}

.Article .Top h1 {
	padding-bottom: 5px;
	font-size: 28px;
	line-height: 36px;
	font-weight: normal;
	color: #333;
}

.Article .Top h1 em.none {
	font-style: normal;
	color: #F90;
}

.Article .Top h1 em.pending {
	font-style: normal;
	color: #00BB4B;
}

.Article .Top h3 {
	margin: 2px 0;
	font-size: 18px;
	color: #393939;
	font-weight: normal;
}

.Article .Top h3 a {
	text-decoration: none;
}

.Article .Top .Tags a {
	margin-left: 5px;
	text-decoration: none;
}

.Article .Top .Tags a.tag {
	background: #46A6D2;
	color: white;
	padding: 2px 5px;
}

.Article .Top .Tags a.tag:hover {
	background-color: #3a7bd2;
}

.Article .Top .rec_user {
	height: 22px;
	line-height: 22px;
}

.Article .Top .rec_user a {
	text-decoration: none;
}

.Article .Top .rec_user .share a {
	width: 16px;
	height: 16px;
	text-decoration: none;
	display: inline-block;
	zoom: 1;
	vertical-align: middle;
	margin-left: 5px;
}

.Article .Top .rec_user .share .sina {
	background: url(/img/sina_weibo.png) no-repeat;
}

.Article .Top .rec_user .share .tencent {
	background: url(/img/tencent_weibo.png) no-repeat;
}

.Article .Top .rec_user .options {
	float: right;
}

.Article .Top .Vote {
	float: right;
	margin-right: 20px;
	padding: 5px;
	background: #005075;
	color: #FFF;
	width: 54px;
	text-align: center;
	display: block;
}

.Article .Top .Vote a {
	font-size: 16pt;
	color: #FFF;
	display: block;
	border-top: 1px solid #073f59;
	text-decoration: none;
}

.Article .Top .Vote a:hover {
	color: #ff0;
}

.Article .Top .Vote em {
	font-size: 12pt;
	font-style: normal;
	padding-bottom: 5px;
	border-bottom: 1px solid #04608a;
	display: block;
}

.Article .toolbar {
	overflow: hidden;
	padding: 5px 0 5px 5px;
	color: #6A6A6A;
	border-left: 1px solid #EDEDED;
	border-right: 1px solid #EDEDED;
}

.Article .toolbar a {
	text-decoration: none;
}

.Article .toolbar .label {
	float: left;
	width: 100px;
}

.Article .toolbar em {
	color: #A3A3A3;
	font-style: normal;
	font-size: 12px;
}

.Article .toolbar a.t_user {
	
}

.Article .toolbar .options {
	float: right;
	width: 260px;
	text-align: right;
	padding-right: 5px;
}

.Article .toolbar .options a.selected {
	color: #b90000;
	font-weight: bold;
}

.Article .toolbar .contributers {
	width: 610px;
	float: left;
}

.Article .Tags {
	line-height: 22px;
}

.Article .copyright {
	background: #efe;
	text-align: left;
	margin: 20px 10px;
	padding: 3px 0 3px 10px;
	color: #333;
	font-size: 10pt;
	line-height: 22px;
	border-left: 10px solid #CFC;
}

.Article .Body {
	border: 1px solid #EDEDED;
}

.Article .Body .paragraph_eng {
	background: #FFF;
	padding: 10px 0;
	border: 1px solid #F9F9F9;
}

.Article .Body .paragraph_eng .TextContent {
	width: 750px;
	padding: 0 10px;
	font-size: 10pt;
	line-height: 180%;
	overflow: hidden;
}

.Article .Body .paragraph_eng .TextContent span {
	margin: 0 2px;
}

.Article .Body .paragraph_eng .translaters {
	width: 210px;
	padding: 0 6px;
}

.Article .Body .translate_chs {
	padding: 0;
	border: 3px solid #F9F9F9;
}

.Article .Body .translate_chs .bdt10 {
	border-top: medium double #E3E3E3;
}

.Article .Body .bd10 {
	border: 1px solid #A00;
}

.Article .Body .paragraph_chs {
	background: #FFF;
	padding: 10px 0;
}

.Article .Body .paragraph_chs .TextContent {
	width: 750px;
	font-size: 10.5pt;
	padding: 0 10px;
	overflow: hidden;
}

.Article .Body .paragraph_chs .translater {
	width: 210px;
	padding: 0 6px;
}

.translaters h3 {
	color: #686868;
	font-size: 14px;
	font-weight: normal;
	margin: 2px 0;
}

.translaters ul {
	margin: 10px 0;
}

.translaters ul li {
	text-align: center;
	margin: 0 3px 5px 0px;
	width: 45px;
	height: 48px;
	float: left;
	overflow: hidden;
	font-size: 7pt;
}

.translaters ul li a {
	text-decoration: none;
}

.translaters ul li img {
	width: 24px;
	height: 24px;
	border: 1px solid #ddd;
	padding: 2px;
	background: #fff;
}

.translaters ul li a:hover img {
	border: 1px solid #40AA53;
}

a.TBUTTON {
	text-decoration: none;
	background: #4E867B;
	border: none;
	color: #FFF;
	font-size: 18px;
	padding: 4px 14px;
	margin-right: 3px;
}

a.TBUTTON:hover {
	background: #4f978a;
}

input.TBUTTON {
	background: #4E867B;
	border: none;
	color: #FFF;
	font-size: 18px;
	padding: 4px 14px;
	margin-right: 3px;
	cursor: pointer;
}

input.TBUTTON:hover {
	background: #4f978a;
}

.translater a {
	text-decoration: none;
}

.translater a img {
	float: left;
	width: 46px;
	height: 46px;
	border: 1px solid #ddd;
	padding: 2px;
	margin-top: 5px;
	background: #fff;
}

.translater .info {
	float: left;
	margin: 0 10px;
	width: 126px;
	height: 45px;
}

.translater .info h6 {
	font-weight: normal;
	font-size: 10pt;
	color: #444;
}

.translater .info p {
	color: #666;
	margin: 5px 0;
}

.translater .info p em {
	color: #A00;
	margin: 0 2px;
}

.translater .vote {
	height: 30px;
	line-height: 30px;
	margin-top: 20px;
	color: #666;
}

.translater a.showOthers {
	padding-left: 20px;
	background: url(/img/translate.gif) 0 -218px no-repeat;
	font-size: 10pt;
	height: 30px;
	line-height: 30px;
}

.translater a.closeOthers {
	background: url(/img/translate.gif) 0 -250px no-repeat;
}

.EditTop {
	width: 99%;
	text-align: left;
	margin: 0 auto;
}

.Edit .Top {
	margin-top: 10px;
	padding: 10px;
	background: #EDEDED;
	color: #666;
}

.Edit .Top h1 {
	font-size: 20px;
	line-height: 26px;
	font-weight: normal;
	color: #333;
}

.Edit .Top h3 {
	margin: 2px 0;
	font-size: 14px;
	color: #393939;
	font-weight: normal;
}

.Edit .Top h3 a {
	text-decoration: none;
}

.Edit .Body {
	margin-top: 10px;
	padding: 10px;
	background: #EDEDED;
}

.Edit .Body .p_content {
	float: left;
	width: 49%;
	height: 650px;
}

.Edit .Body .p_content .title {
	height: 28px;
	line-height: 28px;
	font-size: 12pt;
	text-align: center;
}

.Edit .Body .p_content .title h3 {
	color: #666;
	font-weight: normal;
}

.Edit .Body .p_content .title a {
	text-decoration: underline;
}

.Edit .Body .p_content .title .prev {
	float: left;
}

.Edit .Body .p_content .title .next {
	float: right;
}

.Edit .Body .p_content .TextContent {
	height: 572px;
	padding: 5px;
	border: 1px solid #CCC;
	overflow-y: auto;
	overflow-x: hidden;
	background: #F6F6F6;
	font-size: 10pt;
}

.Edit .Body .p_editor {
	float: right;
	width: 49.5%;
	height: 650px;
}

.Edit .Body .p_toolbar {
	float: left;
	height: 650px;
	line-height: 650px;
	text-align: center;
	width: 1.3%;
}

.Edit .Body .p_toolbar a {
	text-decoration: none;
	width: 100%;
	background: #4E867B;
	color: white;
	font-size: 8pt;
	-moz-border-radius: 2px;
	border-radius: 2px;
	-webkit-border-radius: 2px;
}

.Edit .action {
	margin-top: 20px;
	float: right;
}

.Bottom {
	margin: 20px 0;
}

.Bottom .comments {
	float: left;
	width: 680px;
}

.comments h2 {
	font-size: 12pt;
	border-bottom: medium double #E3E3E3;
	margin: 5px;
	padding: 0 0 3px 5px;
}

.comments h2 span {
	margin-left: 10px;
	color: #444;
	font-size: 10pt;
	font-weight: normal;
}

.comments h2 em.reply_count {
	font-style: normal;
	color: #A00;
}

.comments h2 .more {
	float: right;
	font-weight: normal;
	font-size: 10pt;
	color: #666;
}

.comments .comment {
	margin: 5px 0 15px 0;
	padding: 5px 0 5px 5px;
	border-bottom: 1px dashed #ddd;
}

.comments .comment .user {
	float: left;
	width: 40px;
	margin: 0 12px 0 0;
	font-size: 9pt;
	color: #666;
}

.comments .comment .user img {
	width: 32px;
	height: 32px;
	margin: 3px 0 0 0;
}

.comments .comment .body {
	float: left;
	width: 620px;
}

.comments .comment .body .time {
	float: left;
	width: 380px;
	font-size: 9pt;
	color: #666;
}

.comments .comment .body .time a {
	color: #999;
}

.comments .comment .body .time a:hover {
	background: #666;
	color: #fff;
}

.comments .comment .body .opts {
	float: right;
	width: 190px;
	font-size: 9pt;
	text-align: right;
}

.comments .comment .body .opts a {
	color: #999;
	padding: 0 2px;
}

.comments .comment .body .opts a:hover {
	background: #666;
	color: #fff;
}

.comments .comment .body .detail {
	margin: 10px 0;
	font-size: 10.5pt;
}

.comments .comment .body .detail div.ref {
	border: 1px solid #999;
	margin: 0 0 10px 0;
	padding: 3px;
	font-size: 9pt;
	color: #333;
	background: #ffe;
}

.comments .comment .body .detail div.ref h4 {
	margin: 0;
	padding: 2px 0px 3px 0px;
	color: #1E50A2;
	font-size: 9pt;
	font-weight: normal;
}

.comments .comment .body .detail div.ref .ref_body {
	margin: 0;
	padding: 2px;
	line-height: 20px;
	color: #666;
	font-size: 9pt;
	color: #333;
}

.comments .comment .body .detail div.ref .ref_body img {
	display: none;
	width: 0;
	height: 0;
}

.comments .pager {
	margin-left: 60px;
}

.commentForm {
	margin: 20px 0;
}

.commentForm .user {
	float: left;
	width: 60px;
}

.commentForm .user img {
	width: 32px;
	height: 32px;
	margin: 0 0 0 5px;
}

.commentForm form {
	float: left;
}

.commentForm form textarea {
	border: 1px solid #999;
}

.commentForm form input.SUBMIT {
	font-size: 18px;
	padding: 4px 10px;
	margin: 10px 0;
	float: right;
}

.myList table {
	margin: 10px;
	font-size: 10pt;
	table-layout: fixed;
}

.myList table td {
	vertical-align: top;
	overflow: hidden;
}

.myList a {
	text-decoration: none;
}

.myList .title {
	
}

.myList .title a {
	text-decoration: none;
	color: #46B;
}

.myList .title span {
	font-size: 9pt;
	color: #999;
}

.myList .vote {
	width: 50px;
	font-size: 9pt;
	color: #999;
}

.myList .date {
	width: 70px;
	font-size: 9pt;
	color: #999;
}

.myList .opts {
	width: 100px;
	text-align: right;
	color: #999;
}

.myList .pager {
	margin: 0 10px 10px 10px;
}

.cmptable {
	table-layout: fixed;
	background: #EDEDED;
}

.cmptable td.eng {
	background-color: #FFFFFF;
	padding: 5px;
	overflow: hidden;
	font-size: 10pt;
	line-height: 1.5;
}

.cmptable td.chs {
	background-color: #FFFFFF;
	padding: 5px;
	overflow: hidden;
	font-size: 10.5pt;
	line-height: 1.5;
}

.cmptable td p {
	margin: 10px 0;
}

.cmptable td .infoicon {
	float: right;
	background: #EBEBEB;
	height: 20px;
	padding: 0 6px;
	line-height: 20px;
	z-index: 999;
	text-align: center;
	font-size: 11px;
	color: #060;
	border-radius: 3px;
	cursor: pointer;
}

.cmptable td .infoicon img {
	margin-left: 5px;
	vertical-align: middle;
	padding-top: 2px;
}

.cmptable td .infocard {
	position: absolute;
	top: 30px;
	right: 0px;
	padding: 5px 10px;
	font-size: 10pt;
	border-radius: 8px;
	z-index: 100;
	background: #EDEDED;
	display: none;
}

.cmptable td .infocard h1 {
	height: 20px;
	line-height: 20px;
	font-size: 15px;
	color: #666;
	margin-bottom: 5px;
	border-bottom: 1px dotted #CCC;
}

.cmptable td .infocard h1 a.close {
	float: right;
	font-size: 6pt;
}

.cmptable td .infocard h1 a.close img {
	width: 15px;
	height: 15px;
}

.cmptable td .infocard a {
	text-decoration: none;
}

.cmptable td .infocard a img {
	float: left;
	width: 50px;
	height: 50px;
}

.cmptable td .infocard .text {
	float: left;
	margin-left: 10px;
}

.cmptable td .infocard h6 {
	font-weight: normal;
	font-size: 10pt;
	color: #444;
}

.cmptable td .infocard p {
	color: #666;
	margin: 0;
	padding: 0;
}

.cmptable td .infocard p em {
	color: #A00;
	margin: 0 2px;
}

.cmptable td  ol {
	list-style-type: decimal;
	margin: 0.5em 0 0.5em 1.5em;
	line-height: 1.5em;
}

.cmptable td  ul {
	list-style-type: disc;
	margin: 0.5em 0 0.5em 1.5em;
	line-height: 1.5em;
}

.QuestionHeader {
	height: 34px;
	border-bottom: 1px solid #40AA53;
	margin: 0 0 15px 0;
}

.QuestionHeader #portrait {
	float: left;
	width: 35px;
}

.QuestionHeader #portrait img {
	width: 24px;
	height: 24px;
}

.QuestionHeader #switcher {
	float: left;
	margin: 5px 0 0 2px;
}

.QuestionHeader #switcher h1 {
	font-size: 12pt;
	float: left;
	color: #666;
}

.QuestionHeader #switcher h1 a {
	text-decoration: none;
}

.QuestionHeader #switcher h1 em {
	font-style: normal;
	color: #40AA53;
}

.QATip {
	margin: 40px 0 50px 100px;
}

.QATip h1 {
	font-size: 13.5pt;
}

.QATip h1 em {
	color: #A00;
	font-style: normal;
}

.QATip .text {
	margin: 20px 0 20px 20px;
	font-size: 11pt;
}

.QATip .text p.hint {
	color: #A00;
	font-size: 10pt;
	margin-top: 10px;
}

.QATip .text ul {
	margin: 10px 0 0 0;
	list-style-type: disc;
	list-style-position: inside;
	line-height: 24px;
}

.QATip .btn_view {
	margin-left: 20px;
}

.AllTags {
	padding-bottom: 10px;
}

.AllTags ul.tagList {
	margin: 10px;
}

.AllTags ul.tagList li {
	float: left;
	width: 24%;
}

.AllTags ul.tagList li .stat {
	color: #666;
	font-size: 8pt;
	-webkit-text-size-adjust: none;
}

.AllTags a.tag,.PopularTags a.tag {
	background-color: #E0EAF1;
	border-bottom: 1px solid #3E6D8E;
	border-right: 1px solid #7F9FB6;
	color: #3E6D8E;
	font-size: 8pt;
	-webkit-text-size-adjust: none;
	line-height: 2.4;
	margin: 2px 2px 2px 0;
	padding: 2px 4px;
	text-decoration: none;
	white-space: nowrap;
}

.AllTags a.tag em,.PopularTags a.tag em {
	font-style: normal;
	color: #666;
	font-size: 7pt;
	margin-left: 2px;
}

.AllTags a.tag:hover,.PopularTags a.tag:hover {
	background-color: #3E6D8E;
	color: #fff;
}

.AllTags a.tag:hover em,.PopularTags a.tag:hover em {
	color: #fff;
}

.AllTags .pager {
	margin: 0 10px;
}</style>
<div class='Article'>
	<div class='Top'>
		<div class='Vote'><em id='vote_count'>4</em><a href='javascript:vote_article(460);'>顶</a></div>
		<h1>
            查看 Node.js 中的内存泄露
                    </h1>
		<h3>英文原文：<a href='https://hacks.mozilla.org/2012/11/tracking-down-memory-leaks-in-node-js-a-node-js-holiday-season/' target='_blank'>Tracking Down Memory Leaks in Node.js</a></h3>
        <div class='Tags'>
		<strong>标签：</strong>
						<a href='http://www.oschina.net/translate/tag/nodejs' class='tag project image' data-id='13342' title='服务器端的JavaScript脚本 Node.js'>Node.js</a> 		        		</div>
		<div class='rec_user'>
            <span class="options">
                                <style>
#TagsSwitcher{color:#A00;}
#RecTags,#MyTags{margin:5px 0;}
#RecTags a.tag{line-height:24px;}
#favor_form p:first-child{margin:5px 0;}
#favor_form{width:200px;}
#favor_form p {color:#666;}
#favor_form form{min-height: 85px;width:200px;}
#favor_form form ._favor_input{display:block;margin:2px 0;width:199px;}
#favor_form form ._favor_button{float:left;padding:2px 5px;}
.favor_ok {text-align:center;font-size:10.5pt;width:199px;height:60px;margin-top:10px;}
#TagsSwitcher{cursor:pointer;float:right;margin-top:10px;}
#MyTags{display:none;width:199px;}
#MyTags a.tag {float:left; background-color: #E0EAF1;border-bottom: 1px solid #3E6D8E;border-right: 1px solid #7F9FB6;color: #3E6D8E;font-size: 8pt;line-height: 16px;margin: 2px 2px 2px 0;padding: 2px 4px;text-decoration: none;white-space: nowrap;}
#MyTags a.tag:hover{background-color: #3E6D8E;color: #FFF;}
</style>
<script type='text/javascript'>
var favor_add = "<a href='javascript:add_to_favor(460,7)' id='favor_trigger' title='添加到收藏夹'>我要收藏</a>";
var favor_del = "<a href='javascript:delete_favor(460,7)' id='favor_trigger' style='color:#a00;'>取消收藏</a>";
var favor_ok = "<p class='favor_ok'>已成功添加到收藏夹<br/><br/> <a href='null/favorites?type=7'>我的收藏夹</a> | <a href='javascript:close_favor()'>关闭</a></p>";
function delete_favor(obi_id, obj_type){
	$('#attention_it').html(favor_add);
	$("#p_attention_count").load("/action/favorite/cancel?type="+obj_type+"&id="+obi_id, {user: ''});
}
function add_to_favor(obj_id, obj_type){
	if(confirm('必须登录后才能收藏，是否现在登录？')){
		location.href="http://www.oschina.net/home/login?goto_page="+encodeURIComponent(location.href);
	}
}
function close_favor(elem_id){
    $('#favor_trigger').poshytip('destroy');
}
function setTag(tv){
	var t = $("._favor_input");
	var value = t.val();
	var tags = value.replace(/，/ig,',').split(',');
	var exist = false;
	value = $.map(tags,function(v,i){
		if($.trim(tv) == $.trim(v)){
			exist = true;
			return undefined;
		}
		return v;
	}).join(',');
	if(exist){
		t.val(value);
		return;
	}
	if(value!="")
		t.val(value+","+tv);
	else
		t.val(tv)
}
function ltrim(str){
    var whitespace = new String(" \t\n\r");
    var s = new String(str);
    if (whitespace.indexOf(s.charAt(0)) != -1){
        var j=0, i = s.length;
        while (j < i && whitespace.indexOf(s.charAt(j)) != -1){
            j++;
        }
        s = s.substring(j, i);
    }
    return s;
}

function rtrim(str){
    var whitespace = new String(" \t\n\r");
    var s = new String(str);
    if (whitespace.indexOf(s.charAt(s.length-1)) != -1){
        var i = s.length - 1;
        while (i >= 0 && whitespace.indexOf(s.charAt(i)) != -1){
            i--;
        }
        s = s.substring(0, i+1);
    }
    return s;
}
 
function trim(str){
    return rtrim(ltrim(str));
}
</script>
<em id='p_attention_count'>0</em>人收藏此文章,
<span id='attention_it'>
	<script type='text/javascript'>document.write(favor_add);</script>
</span>
<script type="text/javascript">
	$(document).ready(function(){
    	$.ajax({
    		url:"/action/favorite/attentionUsersCount",
    		type:"get",
    		data:"id="+460+"&type="+7,
    		success:function(msg){
				$("#p_attention_count").html(msg);
    		}
    	});
	});
</script>            </span>
			<a href='http://my.oschina.net/Jeky' target='_blank'>Jeky</a> 推荐于 3年前 (共 9 段, 翻译完成于 01-22) (<a href='#comments'>7评</a>)
            <span class="share">
                                <a class="sina" title="分享到新浪微博"  href="javascript:void((function(s,d,e,r,l,p,t,z,c){var%20f='http://v.t.sina.com.cn/share/share.php?appkey=858381728',u=z||d.location,p=['&url=',e(u),'&title=',e(t||d.title),'&source=',e(r),'&sourceUrl=',e(l),'&content=',c||'gb2312','&pic=',e(p||'')].join('');function%20a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=440,height=430,left=',(s.width-440)/2,',top=',(s.height-430)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent))setTimeout(a,0);else%20a();})(screen,document,encodeURIComponent,'','','','查看 Node.js 中的内存泄露 - 技术翻译: 这篇文章是由Mozilla的Identity团队带来的 A Node.JS Holiday Season系列文章的首篇，该团队上个月发布了 Persona的第一个测试版本。在开发Persona时我们构建了一系列的...','','utf-8'));"></a><a class="tencent" title="分享到腾讯微博"  href="javascript:(function(){window.open('http://v.t.qq.com/share/share.php?url='+encodeURIComponent(document.location)+'&amp;appkey=96f54f97c4de46e393c4835a266207f4&amp;site=&amp;title='+encodeURIComponent(document.title)+encodeURIComponent(': 这篇文章是由Mozilla的Identity团队带来的 A Node.JS Holiday Season系列文章的首篇，该团队上个月发布了 Persona的第一个测试版本。在开发Persona时我们构建了一系列的...'),'', 'width=450, height=400, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no');}())"></a>
            </span>
		</div>
		<div class='clear'></div>
	</div>
		<div class='toolbar'>
				<span class='label'>参与翻译<em>(3人)</em>：</span>
        <div class="contributers"><a href='http://my.oschina.net/u/577817' target='_blank' class='t_user'>MuhammadW</a>, <a href='http://my.oschina.net/u/241565' target='_blank' class='t_user'>wilfon</a>, <a href='http://my.oschina.net/u/130692' target='_blank' class='t_user'>天朝惘民</a></div>		
				<div class='options'>
                    <a href='http://www.oschina.net/translate/tracking-down-memory-leaks-in-node-js-a-node-js-holiday-season' class='selected'>仅中文</a> | <a href='http://www.oschina.net/translate/tracking-down-memory-leaks-in-node-js-a-node-js-holiday-season?cmp' target="_blank">中英文对照</a> | <a href='http://www.oschina.net/translate/tracking-down-memory-leaks-in-node-js-a-node-js-holiday-season?lang=eng'>仅英文</a> | <a href="?print" target="_blank">打印此文章</a>
                </div>
	</div>
			<div class='Body' style="position:relative;">
								                    <div id='translate_6682' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;"  rowspan="2"><div class='TextContent'><p> 这篇文章是由Mozilla的Identity团队带来的 <a href="https://hacks.mozilla.org/category/a-node-js-holiday-season/" rel="nofollow">A Node.JS Holiday Season</a>系列文章的首篇，该团队上个月发布了 <a target="_blank" href="http://identity.mozilla.com/post/32395255498/announcing-the-first-beta-release-of-persona" rel="nofollow">Persona</a>的第一个测试版本。在开发Persona时我们构建了一系列的工具，包括了从调试，到本地化，到依赖管理以及更多的方面。在这一系列的文章中我们将与社区分享我们的经验和这些工具，这对任何想用node.js建立一个高可用性服务的人都很有用。我们希望您能喜欢这些文章，并期待看到您的想法和贡献。 </p> 
<p> 我们将从一篇关于Node.js的实质性问题：内存泄漏的主题文章开始。我们会介绍 <a target="_blank" href="https://github.com/lloyd/node-memwatch" rel="nofollow">node-memwatch</a> — 一个帮助发现并隔离Node中的内存泄漏问题的函数库。 </p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/u/241565' title='wilfon' target='_blank'><img src="http://static.oschina.net/uploads/user/120/241565_50.jpg" align="absmiddle" alt="wilfon" title="wilfon" class="SmallPortrait" user="241565"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/u/241565' target='_blank'>wilfon</a><br/>翻译于 3年前</h6>
                <p><em id='vote_count_6754'>2</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(6754);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
            			            </p>
        </td>
    </tr>
        <tr>
        <td class="translater" valign="bottom">
                        <a id='btn_show_other_6682' class="showOthers" href='javascript:show_other(6682,6754);'>其它翻译版本(1)</a>
        </td>
    </tr>
    </table>
<div id='other_translate_6682' style='display:none;'>
	<div style='text-align:center;margin:10px 0;'><img src='/img/loading.gif?t=1399607812000' alt='loading...' /><strong>正在加载...</strong></div>
</div>
</div>
        		                    <div id='translate_6683' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;"  rowspan="2"><div class='TextContent'><p> <strong>为什么自寻烦恼？</strong> </p> 
<p> 关于追踪内存泄漏问得最多的问题就是，“为什么要自寻烦恼？”。难道没有更紧迫的问题需要先<span>解决吗？为什么不选择不时地重启服务，或为之分配更多的ＲＡＭ？为了回答这些问题，我们提出了以下三点建议：</span> </p> 
<p> <span>１．也许你不在乎不断增长的内存占用，但Ｖ８在乎（Ｖ８是Ｎｏｄｅ运行时的引擎）。随着内存泄漏的增长，Ｖ８对垃圾收集器越来越具有攻击性，这会使你的应用运行速度变慢。所以，在Ｎｏｄｅ上，内存泄漏会损害程序性能。</span> </p> 
<p> <span>２．内存泄漏可能触发其他类型的失败。内存泄漏的代码可能会持续的引用有限的资源。你可能会耗尽文件描述符；你还可能会突然不能建立新的数据库连接。这类问题可能在你的应用耗尽内存前很早就会暴露出来，但它仍然会是你陷入困境。</span> </p> 
<p> <span>３．最后，你的应用迟早会崩溃，并且在你的应用受到欢迎时肯定会发生。所有人都会在Ｈａｃｋｅｒ　Ｎｅｗｓ上嘲笑你，讽刺你，这样你就悲剧了。</span> </p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/u/130692' title='天朝惘民' target='_blank'><img src="/img/portrait.gif?t=1399607780000" align="absmiddle" alt="天朝惘民" title="天朝惘民" class="SmallPortrait" user="130692"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/u/130692' target='_blank'>天朝惘民</a><br/>翻译于 3年前</h6>
                <p><em id='vote_count_6750'>1</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(6750);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
            			            </p>
        </td>
    </tr>
        <tr>
        <td class="translater" valign="bottom">
                        <a id='btn_show_other_6683' class="showOthers" href='javascript:show_other(6683,6750);'>其它翻译版本(1)</a>
        </td>
    </tr>
    </table>
<div id='other_translate_6683' style='display:none;'>
	<div style='text-align:center;margin:10px 0;'><img src='/img/loading.gif?t=1399607812000' alt='loading...' /><strong>正在加载...</strong></div>
</div>
</div>
        		                    <div id='translate_6684' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><h2 id="content_h2_3_5"> 溃千里之堤的蚁穴在哪里？ </h2> 
<p> 在构建复杂应用的时候，很多地方都可能发生内存泄露。 <a href="https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures" rel="nofollow">闭包</a>可能是最广为人知也是最声名狼藉的。因为闭包保留了对其作用域内的东西的引用，而这正是通常的内存泄露之源。 </p> 
<p> 闭包泄露往往只有在有人去寻找它们的时候才能发现。但是在Node的异步世界里，我们随时随地的通过回调函数不停的生成闭包。如果这些回调函数没有在创建后立刻使用，分配的内存就会持续增长，那些看起来没有内存泄露问题的代码也会产生泄露。而这种问题更难发现。 </p> 
<p> 你的应用也可能由于上游代码的问题导致内存泄露。也许你能定位到出现内存泄露的代码，但是你可能只能眼巴巴地盯着你那完美无缺的代码然后困惑于这到底是怎么泄露的！ </p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/u/577817' title='MuhammadW' target='_blank'><img src="http://static.oschina.net/uploads/user/288/577817_50.jpg?t=1368093004000" align="absmiddle" alt="MuhammadW" title="MuhammadW" class="SmallPortrait" user="577817"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/u/577817' target='_blank'>MuhammadW</a><br/>翻译于 3年前</h6>
                <p><em id='vote_count_6769'>1</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(6769);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
            			            </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_6685' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><p> 正是这些难以定位的内存泄露促使我们想要一个node-memwatch这样的工具。传说几个月以前，我们的<a target="_blank" href="https://github.com/lloyd" rel="nofollow">Lloyd Hilaiel</a>把他自己锁在一个小房间里两天，试着追踪一个在压力测试下变得非常明显的内存泄露问题。（顺便说下，尽请期待Lloyd即将到来的关于负荷测试的文章） </p> 
<p> 经过两天的努力，他终于发现了Node内核中的元凶：http.ClientRequest中的事件监听器没有被释放。(最终<a target="_blank" href="https://github.com/vvo/node/commit/e138f76ab243ba3579ac859f08261a721edc20fe" rel="nofollow">修复这个问题的补丁</a>只有两个但却至关重要的字母)。正是这次痛苦的经历促使Lloyd想要写一个能够帮助查找内存泄露的工具。 </p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/u/577817' title='MuhammadW' target='_blank'><img src="http://static.oschina.net/uploads/user/288/577817_50.jpg?t=1368093004000" align="absmiddle" alt="MuhammadW" title="MuhammadW" class="SmallPortrait" user="577817"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/u/577817' target='_blank'>MuhammadW</a><br/>翻译于 3年前</h6>
                <p><em id='vote_count_6770'>1</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(6770);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
            			            </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_6686' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><h2 id="content_h2_5_5"> 内存泄露定位工具 </h2> 
<p> 现在已经有许多好用且不断增强的工具用于定位Node.js应用的内存泄露。下面是其中的一些： </p> 
<ul> 
 <li> Jimb Esser的<a href="https://github.com/Jimbly/node-mtrace" rel="nofollow">node-mtrace</a>，它使用了GCC的mtrace工具来分析堆的使用。 </li> 
 <li> Dave Pacheco的<a href="https://github.com/davepacheco/node-heap-dump" rel="nofollow">node-heap-dump</a>对V8的堆抓取了一张快照并把所有的东西序列化进一个巨大的JSON文件。它还包含了一些分析研究快照结果的JavaScript工具。<br> </li> 
 <li> Danny Coates的<a href="https://github.com/dannycoates/v8-profiler" rel="nofollow">v8-profiler</a>和<a href="https://github.com/dannycoates/node-inspector" rel="nofollow">node-inspector</a>提供了绑定在Node中的V8分析器和一个基于WebKit Web Inspector的debug界面。<br> </li> 
 <li> Felix Gnass的<a href="http://fgnass.posterous.com/finding-memory-leaks-in-nodejs-applications" rel="nofollow">未禁用保持器图表</a>分支。 </li> 
 <li> Felix Geisendörfer的<a href="https://github.com/felixge/node-memory-leak-tutorial" rel="nofollow">Node内存泄露指导（Node Memory Leak Tutorial）</a>是一个又短又酷的v8-profiler和node-debugger使用教程。同时也是目前最先进的Node.js内存泄露调试技术指南。 </li> 
 <li> Joyent的SmartOS平台，它提供了大量用于<a target="_blank" href="http://dtrace.org/blogs/bmc/2012/05/05/debugging-node-js-memory-leaks/" rel="nofollow">调试Node.js内存泄露</a>的工具。<a href="http://dtrace.org/blogs/bmc/2012/05/05/debugging-node-js-memory-leaks/" rel="nofollow"></a> </li> 
</ul> 
<p> 上面的这些工具我们都很喜欢，但是没有一个适用于我们的场景。Web Inspector对于开发中的应用非常棒，但是很难用于热部署的场景，尤其是在多服务器和涉及子进程的时候。同样的，在长时间高负载运行中出现的内存泄露也很难复现。像dtrace和libumem这样的工具虽然让人印象深刻，但是不是所有的操作系统都能用。 </p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/u/577817' title='MuhammadW' target='_blank'><img src="http://static.oschina.net/uploads/user/288/577817_50.jpg?t=1368093004000" align="absmiddle" alt="MuhammadW" title="MuhammadW" class="SmallPortrait" user="577817"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/u/577817' target='_blank'>MuhammadW</a><br/>翻译于 3年前</h6>
                <p><em id='vote_count_6772'>1</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(6772);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
            			            </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_6687' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;"  rowspan="2"><div class='TextContent'><h2 id="content_h2_6_5"> Enternode-memwatch </h2> 
<p> 我们需要一个跨平台的调试库，当我们的程序可能存在内存泄漏时，它不需要设备告诉我们，并且会帮我们找到哪里存在泄漏。所以我们实现了node-memwatch。 </p> 
<p> 它给我们提供三件东西： </p> 
<ul> 
 <li> 一个‘泄漏’事件发射器 </li> 
 <pre class="brush:js; toolbar: true; auto-links: false;">&nbsp;memwatch.on('leak', function(info) {
// look at info to find out about what might be leaking
});</pre> 
 <li> <p> 一个‘状态事件发射器 </p> <pre class="brush:js; toolbar: true; auto-links: false;">var memwatch = require('memwatch');
memwatch.on('stats', function(stats) {
// do something with post-gc memory usage stats
});</pre> </li> 
 <li> <p> 一个堆内存区分类 </p> <pre class="brush:js; toolbar: true; auto-links: false;">var hd = new memwatch.HeapDiff();
// your code here ...
var diff = hd.end();</pre> </li> 
 <li> <p> 并且还有一个在测试时很有用处的，可以触发垃圾收集器的功能。好吧，一共四点。 </p> <pre class="brush:js; toolbar: true; auto-links: false;">var stats = memwatch.gc();</pre> </li> 
</ul></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/u/130692' title='天朝惘民' target='_blank'><img src="/img/portrait.gif?t=1399607780000" align="absmiddle" alt="天朝惘民" title="天朝惘民" class="SmallPortrait" user="130692"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/u/130692' target='_blank'>天朝惘民</a><br/>翻译于 3年前</h6>
                <p><em id='vote_count_6752'>1</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(6752);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
            			            </p>
        </td>
    </tr>
        <tr>
        <td class="translater" valign="bottom">
                        <a id='btn_show_other_6687' class="showOthers" href='javascript:show_other(6687,6752);'>其它翻译版本(1)</a>
        </td>
    </tr>
    </table>
<div id='other_translate_6687' style='display:none;'>
	<div style='text-align:center;margin:10px 0;'><img src='/img/loading.gif?t=1399607812000' alt='loading...' /><strong>正在加载...</strong></div>
</div>
</div>
        		                    <div id='translate_6688' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><h2 id="content_h2_7_5"> memwatch.on('stats', ...): Post-GC堆统计 </h2> 
<p> node-memwatch能够在任何一个JS对象分配之前，紧随着一次完整的垃圾回收和内存压缩发出一个内存使用样本。（它使用了V8的post-gc钩子，<em>V8::AddGCEpilogueCallback</em>，来在每次垃圾回收触发时收集堆使用信息） </p> 
<p> 统计数据包括： </p> 
<ul> 
 <li> usage_trend（使用趋势） </li> 
 <li> current_base（当前基数） </li> 
 <li> estimated_base（预期基数） </li> 
 <li> num_full_gc （完整的垃圾回收次数）<br> </li> 
 <li> num_inc_gc （增长的垃圾回收次数）<br> </li> 
 <li> heap_compactions （内存压缩次数）<br> </li> 
 <li> min （最小）<br> </li> 
 <li> max （最大）<br> </li> 
</ul> 
<p> 这里有一个展示存在内存泄露的应用的数据看起来是什么样的例子。下面的图表随着时间追踪内存的使用。疯狂的绿线展示了process.memoryUsage()报告的内容。红线展示了node_memwatch报告的current_base。左下侧的盒子展示了附加信息。 </p> 
<p> <img src="http://static.oschina.net/uploads/space/2013/0117/010214_kiUw_577817.png" alt=""> </p> 
<p> 注意Incr GCs非常高。那说明V8在拼命的尝试清理内存。 </p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/u/577817' title='MuhammadW' target='_blank'><img src="http://static.oschina.net/uploads/user/288/577817_50.jpg?t=1368093004000" align="absmiddle" alt="MuhammadW" title="MuhammadW" class="SmallPortrait" user="577817"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/u/577817' target='_blank'>MuhammadW</a><br/>翻译于 3年前</h6>
                <p><em id='vote_count_6777'>1</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(6777);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
            			            </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_6689' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><h2 id="content_h2_8_5"> memwatch.on('leak', ...): 堆分配趋势 </h2> 
<p> 我们定义了一个简单的侦测算法来提醒你应用程序可能存在内存泄漏。即如果经过连续五次GC，内存仍被持续分配而没有得到释放，node-memwatch就会发出一个leak事件。事件的具体信息格式是明了易读的，就像这样： </p> 
<pre class="brush:js; toolbar: true; auto-links: false;">{ start: Fri, 29 Jun 2012 14:12:13 GMT,
  end: Fri, 29 Jun 2012 14:12:33 GMT,
  growth: 67984,
  reason: 'heap growth over 5 consecutive GCs (20s) - 11.67 mb/hr' }</pre> 
<h2 id="content_h2_8_8"> memwatch.HeapDiff(): 查找泄漏元凶 </h2> 
<p> 最后，node-memwatch能比较堆上对象的名称和分配数量的快照，其对比前后的差异可以帮助找出导致内存泄漏的元凶。 </p> 
<pre class="brush:js; toolbar: true; auto-links: false;">var hd = new memwatch.HeapDiff();
 
// Your code here ...
 
var diff = hd.end();</pre> 对比产生的内容就像这样： 
<pre class="brush:js; toolbar: true; auto-links: false;">{
  "before": {
    "nodes": 11625,
    "size_bytes": 1869904,
    "size": "1.78 mb"
  },
  "after": {
    "nodes": 21435,
    "size_bytes": 2119136,
    "size": "2.02 mb"
  },
  "change": {
    "size_bytes": 249232,
    "size": "243.39 kb",
    "freed_nodes": 197,
    "allocated_nodes": 10007,
    "details": [
      {
        "what": "Array",
        "size_bytes": 66688,
        "size": "65.13 kb",
        "+": 4,
        "-": 78
      },
      {
        "what": "Code",
        "size_bytes": -55296,
        "size": "-54 kb",
        "+": 1,
        "-": 57
      },
      {
        "what": "LeakingClass",
        "size_bytes": 239952,
        "size": "234.33 kb",
        "+": 9998,
        "-": 0
      },
      {
        "what": "String",
        "size_bytes": -2120,
        "size": "-2.07 kb",
        "+": 3,
        "-": 62
      }
    ]
  }
}</pre> HeapDiff方法在进行数据采样前会先进行一次完整的垃圾回收，以使得到的数据不会充满太多无用的信息。memwatch的事件处理会忽略掉由HeapDiff触发的垃圾回收事件，所以在stats事件的监听回调函数中你可以安全地调用HeapDiff方法。 
<br> 
<br> 在下图中，我们加上了堆内存对象分配数量排行： 
<p> <img src="https://hacks.mozilla.org/wp-content/uploads/2012/11/leak-allocations.png" alt="heap-allocations"> </p> 
<h2> </h2></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/u/241565' title='wilfon' target='_blank'><img src="http://static.oschina.net/uploads/user/120/241565_50.jpg" align="absmiddle" alt="wilfon" title="wilfon" class="SmallPortrait" user="241565"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/u/241565' target='_blank'>wilfon</a><br/>翻译于 3年前</h6>
                <p><em id='vote_count_7287'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(7287);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
            			            </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_6690' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><p> 下一步怎么做 </p> 
<p> node-memwatch提供了： </p> 
<ul> 
 <li> 准确的内存使用情况跟踪 </li> 
 <li> 疑似内存泄漏通知 </li> 
 <li> 堆差异比较 </li> 
 <li> 这是跨平台的 </li> 
 <li> 并且不要求任何额外的设备<br> </li> 
</ul> 
<p> 我们想要它的功能更多。特别是，我们希望node-memwatch能够提供一些导致内存泄漏的对象的使用案例（例如，变量名称，数组下标或闭包代码）。 </p> 我们希望您能在调试Node应用程序泄漏问题时发现memwatch很好用，也希望您能复制一份代码并帮助我们做得更好。</div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/u/241565' title='wilfon' target='_blank'><img src="http://static.oschina.net/uploads/user/120/241565_50.jpg" align="absmiddle" alt="wilfon" title="wilfon" class="SmallPortrait" user="241565"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/u/241565' target='_blank'>wilfon</a><br/>翻译于 3年前</h6>
                <p><em id='vote_count_7295'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(7295);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
            			            </p>
        </td>
    </tr>
    </table>
</div>
        				<div class="copyright">
			本文中的所有译文仅用于学习和交流目的，转载请务必注明文章译者、出处、和本文链接<br/>
			我们的翻译工作遵照 <a href='http://zh.wikipedia.org/wiki/Wikipedia:CC' target='_blank'>CC 协议</a>，如果我们的工作有侵犯到您的权益，请及时联系我们
		</div>
	</div>
	<div style="margin:10px 0;">
	    </div>
		<div class='Bottom'>
		<div class='google_ads' style='float:right;width:300px;'>
			<script type="text/javascript"><!--
            google_ad_client = "ca-pub-7090564139599510";
            /* translate-comments */
            google_ad_slot = "8977750911";
            google_ad_width = 300;
            google_ad_height = 250;
            //-->
            </script>
            <script type="text/javascript"
            src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
            </script>
		</div>
		
				<div class='comments'>
			<a name='comments'></a>
			<h2>
                <a href='#top' class="more">回页面顶部</a><a href='#commentForm' class="more" style="margin-right:10px;color:#080;">发表评论</a>
                网友评论<span>共<em class='reply_count'>7</em>条</span>
            </h2>
						<ul class='list'><li class='comment' id='cmt_460_180_1439'>
	<div class='user'><a href="http://my.oschina.net/rox" name="rpl_1439"><img src="http://static.oschina.net/uploads/user/0/180_50.jpg?t=1435129490000" align="absmiddle" alt="静风流云" title="静风流云" class="SmallPortrait" user="180"/></a></div>
	<div class='body'>
		<div class='time'><b>静风流云</b>   发表于 2013-01-23 17:10</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'>学习了，只是知道js内存泄漏是个老大难。</div>
		<div id='inline_reply_of_460_180_1439' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_460_941833_1443'>
	<div class='user'><a href="http://my.oschina.net/gaubee" name="rpl_1443"><img src="http://static.oschina.net/uploads/user/470/941833_50.jpg?t=1358877778000" align="absmiddle" alt="gaubee" title="gaubee" class="SmallPortrait" user="941833"/></a></div>
	<div class='body'>
		<div class='time'><b>gaubee</b>   发表于 2013-01-23 19:03</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'>沙发，反正看不懂</div>
		<div id='inline_reply_of_460_941833_1443' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_460_133030_1444'>
	<div class='user'><a href="http://my.oschina.net/stdcall" name="rpl_1444"><img src="http://static.oschina.net/uploads/user/66/133030_50.jpg?t=1371095746000" align="absmiddle" alt="LEAN" title="LEAN" class="SmallPortrait" user="133030"/></a></div>
	<div class='body'>
		<div class='time'><b>LEAN</b> 来自 <a href="http://www.oschina.net/mobile" target="_blank">Android</a>  发表于 2013-01-23 22:05</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'>文中的组件似乎无法安装</div>
		<div id='inline_reply_of_460_133030_1444' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_460_171129_1447'>
	<div class='user'><a href="http://my.oschina.net/mingshun" name="rpl_1447"><img src="http://static.oschina.net/uploads/user/85/171129_50.png?t=1435394235000" align="absmiddle" alt="mingshun" title="mingshun" class="SmallPortrait" user="171129"/></a></div>
	<div class='body'>
		<div class='time'><b>mingshun</b>   发表于 2013-01-24 07:21</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'>2个月前的文章，当时就试了一下memwatch。功能还不强，只能进行简单的分析，还分析不了闭包和复杂点的代码。不知道现在怎么样了？！</div>
		<div id='inline_reply_of_460_171129_1447' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_460_1018792_10022'>
	<div class='user'><a href="http://my.oschina.net/u/1018792" name="rpl_10022"><img src="/img/portrait.gif?t=1399607780000" align="absmiddle" alt="你想得美" title="你想得美" class="SmallPortrait" user="1018792"/></a></div>
	<div class='body'>
		<div class='time'><b>你想得美</b>   发表于 2013-10-12 09:31</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'>stats 翻译成 “状态”？</div>
		<div id='inline_reply_of_460_1018792_10022' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_460_1993166_18163'>
	<div class='user'><a href="http://my.oschina.net/u/1993166" name="rpl_18163"><img src="http://static.oschina.net/uploads/user/996/1993166_50.png?t=1406853013000" align="absmiddle" alt="memleakin博客" title="memleakin博客" class="SmallPortrait" user="1993166"/></a></div>
	<div class='body'>
		<div class='time'><b>memleakin博客</b>   发表于 2014-08-14 12:30</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'>不错，学习了</div>
		<div id='inline_reply_of_460_1993166_18163' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_460_1050900_19971'>
	<div class='user'><a href="http://my.oschina.net/u/1050900" name="rpl_19971"><img src="http://static.oschina.net/uploads/user/525/1050900_50.png?t=1383473496000" align="absmiddle" alt="hqxluoyang" title="hqxluoyang" class="SmallPortrait" user="1050900"/></a></div>
	<div class='body'>
		<div class='time'><b>hqxluoyang</b>   发表于 2014-11-11 17:56</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'>好东西</div>
		<div id='inline_reply_of_460_1050900_19971' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li></ul>
                    			<div class='clear'></div>
			<div class='commentForm'>
				<div class='user'><a href="" name="commentForm"><img src="/img/portrait.gif?t=1399607780000" align="absmiddle" alt="非会员用户" title="非会员用户" class="SmallPortrait" user=""/></a></div>
    			<form id='form_comment' action='/action/translate/comment?' method='post'>
					<input type="hidden" value="460" name="article">
    				<textarea id='txt_comment' name='content' onkeydown="if((event.metaKey || event.ctrlKey)&&event.keyCode==13){$('#form_comment').submit();}" style='width:600px;height:100px;'></textarea><br/>
    				<input type='submit' value=' 发表评论 ' id='FormSubmitButton' class='SUBMIT rndbutton'/>
    				<span id="form_msg" style='display:none;'></span>
					<p style='margin-top:36px;'><a href='#comments'>回评论顶部</a> | <a href='#top'>回页面顶部</a></p>
    			</form>
			</div>
		</div>
        <div class="clear"></div>
	</div>
	</div>
<div class='clear'></div>
<div id="inline_reply_editor" style="display:none;">
    <div class="CommentForm">
        <form id="form_inline_comment" method="POST" action="/action/translate/comment">
            <input id="inline_reply_id" type="hidden" value="" name="reply_id">
			<input type="hidden" value="460" name="article">
            <textarea id="txt_focus" onkeydown="if((event.metaKey || event.ctrlKey)&&event.keyCode==13){$('#form_inline_comment').submit();}" style="width:400px;height:80px;" name="content"></textarea>
            <br>
            <input class="SUBMIT" type="submit" value="回复">
            <input id="btn_close_inline_reply" class="SUBMIT" type="button" value="关闭">
            文明上网，理性发言
        </form>
    </div>
</div>

<script type="text/javascript" src="/js/sh309/scripts/xregexp-min.js?t=1423294217000"></script>
<script type="text/javascript" src="/js/sh309/scripts/shCore.min.js?t=1423294217000"></script>
<script type="text/javascript" src="/js/sh309/scripts/shAutoloader.js?t=1423294217000"></script>
<link type="text/css" rel="stylesheet" href="/js/sh309/styles/shCore.css?t=1423294217000"/>
<link type="text/css" rel="Stylesheet" href="/js/sh309/styles/shThemeDefault.css?t=1423294217000"/>

<script type="text/javascript">
    SyntaxHighlighter.autoloader(
            'applescript			/js/sh309/scripts/shBrushAppleScript.js?t=1423294217000',
            'actionscript3 as3		/js/sh309/scripts/shBrushAS3.js?t=1423294217000',
            'bash shell				/js/sh309/scripts/shBrushBash.js?t=1423294217000',
            'coldfusion cf			/js/sh309/scripts/shBrushColdFusion.js?t=1423294217000',
            'cpp c					/js/sh309/scripts/shBrushCpp.js?t=1423294217000',
            'obj-c objc				/js/sh309/scripts/shBrushObjC.js?t=1423294217000',
            'c# c-sharp csharp		/js/sh309/scripts/shBrushCSharp.js?t=1423294217000',
            'css					/js/sh309/scripts/shBrushCss.js?t=1423294217000',
            'delphi pascal			/js/sh309/scripts/shBrushDelphi.js?t=1423294217000',
            'diff patch pas			/js/sh309/scripts/shBrushDiff.js?t=1423294217000',
            'erl erlang				/js/sh309/scripts/shBrushErlang.js?t=1423294217000',
            'groovy					/js/sh309/scripts/shBrushGroovy.js?t=1423294217000',
            'haxe hx				/js/sh309/scripts/shBrushHaxe.js?t=1423294217000',
            'java					/js/sh309/scripts/shBrushJava.js?t=1423294217000',
            'jfx javafx				/js/sh309/scripts/shBrushJavaFX.js?t=1423294217000',
            'js jscript javascript	/js/sh309/scripts/shBrushJScript.js?t=1423294217000',
            'perl pl				/js/sh309/scripts/shBrushPerl.js?t=1423294217000',
            'php					/js/sh309/scripts/shBrushPhp.js?t=1423294217000',
            'text plain				/js/sh309/scripts/shBrushPlain.js?t=1423294217000',
            'py python				/js/sh309/scripts/shBrushPython.js?t=1423294217000',
            'ruby rails ror rb		/js/sh309/scripts/shBrushRuby.js?t=1423294217000',
            'scala					/js/sh309/scripts/shBrushScala.js?t=1423294217000',
            'sql					/js/sh309/scripts/shBrushSql.js?t=1423294217000',
            'vb vbnet				/js/sh309/scripts/shBrushVb.js?t=1423294217000',
            'xml xhtml xslt html	/js/sh309/scripts/shBrushXml.js?t=1423294217000'
    );
    SyntaxHighlighter.all();
</script>
<script type="text/javascript" src="/action/visit/translate?id=460"></script>
<link type="text/css" rel="stylesheet" href="/js/syntax-highlighter-2.1.382/styles/shThemeDefault.css?t=1399607772000"/>
<script type='text/javascript'>
$(document).ready(function() {
	$('#form_comment').ajaxForm({
    	dataType: 'json',
		beforeSubmit: function(){
			$('#FormSubmitButton').attr('disabled','disabled');
			$('#form_msg').html("<span class='ajax_processing'>正在提交评论，请稍候...</span>");	
			$('#form_msg').show();	
		},
        success: function(json) {
			$('#FormSubmitButton').removeAttr('disabled');
			    		if(json.msg){
				$('#form_msg').html("<span class='error_msg'>"+json.msg+"</span>");
				$('#form_msg').show();
			}
    		else if(json.id){
    			ajax_get("/translate/show_comment?_cmt_id="+json.id, true, function(data){
    				$('.comments ul.list').append(data);
					$('#txt_comment').val('');
					$('.reply_count').html(json.reply_count);
    			});
				$('#form_msg').hide();
    		}
        }
    });
});
function delete_c(aid,uid,cid) {
	if(confirm("您确认要删除此评论？")){
        ajax_post("/action/translate/delete_comments",{cmt:cid},function(html){
			if(html.length>0)
				alert(html);
			else {
				$("#cmt_"+aid+"_"+uid+"_"+cid).fadeOut();
				$('.reply_count').html(parseInt($('.reply_count').html())-1);
			}
		});
	}
}
function reply_c(aid,uid,cid) {
	$('.inline_reply').empty();
	var div_id = '#inline_reply_of_'+aid+'_'+uid+'_'+cid;
	$('#inline_reply_id').val(uid+'_'+cid);
	$(div_id).html($('#inline_reply_editor').html());
	$('#txt_focus').focus();
	$('#btn_close_inline_reply').click(function(){
		$(div_id).empty();
	});
	$('#form_inline_comment').ajaxForm({
    	dataType: 'json',
    	success: function(json) {
        	if(json.msg){
        		alert(json.msg);
        	}
			else if(json.id){
				ajax_get("/translate/show_comment?_cmt_id="+json.id, true, function(data){
    				$('.comments ul.list').append(data);
					$('.reply_count').html(json.reply_count);
					$(div_id).empty();
    			});
			}
    	}
	});
}
function vote_article(id) {
		alert("必须登录后才能操作 :)");
	}
function vote_block(id) {
		alert("必须登录后才能操作 :)");
	}
function show_other(pid,ppid) {
	if($('#other_translate_'+pid+' .paragraph_chs').length==0) {
    	$('#other_translate_'+pid).show();
    	ajax_post("/translate/show_other_translate","pid="+pid+"&ppid="+ppid,function(html){
    		$('#other_translate_'+pid).hide().html(html);
			// 代码着色
			$('#other_translate_'+pid+' pre').each(function(){
				SyntaxHighlighter.highlight(null,this);
			});
			$('#other_translate_'+pid).slideDown();
    	});
    	}
	else {
		$('#other_translate_'+pid).slideToggle();
	}
	$('#btn_show_other_'+pid).toggleClass('closeOthers');
	$('#translate_'+pid).toggleClass('bd10');
}
function edit_tags(id) {
    popup("/translate/edit_tags?article="+id);
}
</script><div class='clear'></div></div>
	<div id="OSC_Footer" class='CenterDiv'><style>
.oscapp {text-align:left; width:220px;}
.oscapp span {float:left;width:140px;}
.oscapp a {float:left;text-indent:-9999em;width:16px;margin-left:8px;}
.oscapp a.android {background:url('/img/android.gif') no-repeat left center;}
.oscapp a.iphone {background:url('/img/iphone.gif') no-repeat left center;}
.oscapp a.wp7 {background:url('/img/wp7.gif') no-repeat left center;}
</style>
<table width='100%'><tr>
<td align='left'>&copy; 开源中国(OSChina.NET) | <a href="http://www.oschina.net/home/aboutosc">关于我们</a> | <a href="mailto:market@oschina.net">广告联系</a> | <a href="http://weibo.com/oschina2010" target="_blank">@新浪微博</a> | <a href="http://m.oschina.net/">开源中国手机版</a> | <a href='http://www.miitbeian.gov.cn/' target='_blank' style='color:#737573;text-decoration:none;'>粤ICP备12009483号-3</a></td>
<td class='oscapp'>
	<span>开源中国手机客户端：</span>
	<a href="http://www.oschina.net/app" class='android' title='Android客户端'>Android</a>
	<a href="http://www.oschina.net/app" class='iphone' title='iPhone 客户端'>iPhone</a>
	<a href="http://www.oschina.net/app" class='wp7' title='Windows Phone 客户端'>WP7</a>
</td>
</tr>
<tr>
<td colspan='2' align='left'>开源中国社区(OSChina.net)是工信部 <a href='http://www.copu.org.cn/' target='_blank'>开源软件推进联盟</a> 指定的官方社区</td>
</tr>
</table>
<script type='text/javascript'>
<!--
if (top.location != self.location)top.location=self.location;
//-->
</script></div>
</div>
</body>
</html>
<!-- Generated by OsChina.NET (init:1[ms],page:42[ms],ip:113.88.74.205) -->